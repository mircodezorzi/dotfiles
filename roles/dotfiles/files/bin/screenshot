#!/usr/bin/env sh
DIR="/home/mirco/shots"
IMG="$HOME/bin/shot.png"
[ ! -d $DIR ] && mkdir $DIR

filename="$DIR/$(date '+%y%m%d-%H%M-%S').png"

choice=$(echo -e "fullscreen\nfullscreen notification\nactive\narea" | dmenu)
[ -z "$choice" ] && exit

case "$choice" in
  "fullscreen")
    maim    -u                                 $filename ;;
  "fullscreen notification")
    pidof dunst && notify-send -i $IMG "*SNAP*" "Yep, this is going in the desktop thread"
    maim    -u                                 $filename ;;
  "active")
    maim    -u -i "$(xdotool getactivewindow)" $filename ;;
  "area")
    maim -s -u                                 $filename ;;
esac

cat $filename | xclip -selection clipboard -t image/png
