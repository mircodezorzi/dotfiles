- name: installing dependencies
  pacman:
    name: '{{ item }}'
  loop: '{{ [ "python", "python-pip", "npm" ] }}'

- name: installing from source
  make:
    target: install
    chdir: '{{ ansible_env.PWD }}/roles/vim/files/neovim'

- name: installing required python modules
  shell: python3 -m pip install --user neovim

- name: symlinking configuration files
  file:
    src: '{{ ansible_env.PWD }}/roles/vim/files/{{ item }}'
    path: '~/{{ item }}'
    state: link
    force: yes
  loop: '{{ [ ".config/nvim" ] }}'
